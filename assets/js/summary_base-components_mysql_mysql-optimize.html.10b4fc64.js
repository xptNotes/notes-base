"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4169],{3335:(i,s,a)=>{a.r(s),a.d(s,{comp:()=>t,data:()=>l});var e=a(6254);const n={},t=(0,a(6995).A)(n,[["render",function(i,s){return(0,e.uX)(),(0,e.CE)("div",null,s[0]||(s[0]=[(0,e.Fv)('<h1 id="mysql优化" tabindex="-1"><a class="header-anchor" href="#mysql优化"><span>Mysql优化</span></a></h1><h1 id="优化架构图" tabindex="-1"><a class="header-anchor" href="#优化架构图"><span>优化架构图</span></a></h1><h1 id="缓存优化" tabindex="-1"><a class="header-anchor" href="#缓存优化"><span>缓存优化</span></a></h1><h2 id="buffer-pool" tabindex="-1"><a class="header-anchor" href="#buffer-pool"><span>Buffer pool</span></a></h2><h2 id="change-buffer" tabindex="-1"><a class="header-anchor" href="#change-buffer"><span>change buffer</span></a></h2><p>change buffer优化点</p><ul><li>大小</li><li>合并速率</li><li>禁用特定表的change buffer</li></ul><h3 id="大小设置" tabindex="-1"><a class="header-anchor" href="#大小设置"><span>大小设置</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 设置 Change Buffer 最大占 Buffer Pool 的比例（默认 25%）</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> innodb_change_buffer_max_size </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 写密集型场景可增大</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="合并速率" tabindex="-1"><a class="header-anchor" href="#合并速率"><span>合并速率</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 控制磁盘 I/O 能力（影响合并和刷盘速度）</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> innodb_io_capacity </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- SSD 可设更高值</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 控制脏页比例阈值（超过时加速刷新）</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GLOBAL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> innodb_max_dirty_pages_pct </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 75</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="禁用" tabindex="-1"><a class="header-anchor" href="#禁用"><span>禁用</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 对特定表禁用 Change Buffer（适用于几乎不查询的日志表）</span></span>\n<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ALTER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> logs </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DISABLE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> KEYS;  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 禁用二级索引更新，批量插入时优化</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="索引-sql优化" tabindex="-1"><a class="header-anchor" href="#索引-sql优化"><span>索引/SQL优化</span></a></h1>',14)]))}]]),l=JSON.parse('{"path":"/summary/base-components/mysql/mysql-optimize.html","title":"Mysql优化","lang":"zh-CN","frontmatter":{"description":"Mysql优化 优化架构图 缓存优化 Buffer pool change buffer change buffer优化点 大小 合并速率 禁用特定表的change buffer 大小设置 合并速率 禁用 索引/SQL优化","head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/notes-base/summary/base-components/mysql/mysql-optimize.html"}],["meta",{"property":"og:site_name","content":"Offer收割机"}],["meta",{"property":"og:title","content":"Mysql优化"}],["meta",{"property":"og:description","content":"Mysql优化 优化架构图 缓存优化 Buffer pool change buffer change buffer优化点 大小 合并速率 禁用特定表的change buffer 大小设置 合并速率 禁用 索引/SQL优化"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-24T14:35:04.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-24T14:35:04.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Mysql优化\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-05-24T14:35:04.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Jason\\",\\"url\\":\\"https://jason.com\\"}]}"]]},"git":{"createdTime":1748097304000,"updatedTime":1748097304000,"contributors":[{"name":"Jason Statham","username":"Jason Statham","email":"xpt_notes@163.com","commits":1,"url":"https://github.com/Jason Statham"}]},"readingTime":{"minutes":0.55,"words":166},"filePathRelative":"summary/base-components/mysql/mysql-optimize.md","localizedDate":"2025年5月24日","autoDesc":true}')},6995:(i,s)=>{s.A=(i,s)=>{const a=i.__vccOpts||i;for(const[i,e]of s)a[i]=e;return a}}}]);